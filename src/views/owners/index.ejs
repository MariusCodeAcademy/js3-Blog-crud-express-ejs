<%- include('../partials/head.ejs') %> <%- include('../partials/nav.ejs') %>

<main>
  <h1>This is the owners page</h1>
  <% if (locals.feedback && feedback.msg === 'created') { %>
  <div class="alert alert-success" role="alert"> Owner <%= feedback.name %> created, Joy </div>
  <% } %> <% if (locals.feedback && feedback.msg === 'deleted') { %>
  <div class="alert alert-danger" role="alert">
    Owner <strong><%= feedback.name %></strong> was Deleted, Sad
  </div>
  <% } %>
  <h2>Our owners list <a class="btn btn-info float-right" href="/owners/new">Add Owner</a></h2>

  <ol class="list-group">
    <% owners.forEach(({ _id, name, email, updatedAt: date}) => { %>
    <li class="list-group-item d-flex justify-content-between">
      <div>
        Name: <%= name %> , email: <%= email %> <br />
        <small class="text-muted"><%= date.toLocaleString() %> </small>
      </div>

      <div>
        <a href="/owners/single/<%= _id %> " class="btn btn-success">View</a>
        <form action="/owners/delete/<%= _id %>" method="POST">
          <button class="btn btn-danger" type="submit">Delete me</button>
        </form>
      </div>
    </li>
    <% }) %>
  </ol>
</main>

<%- include('../partials/footer.ejs') %>
